<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Client Cost Details</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>Cost Details for Client: {{ cost_details.client.title }}</h1>

    <form method="POST">
        <label for="month">Select Month:</label>
        <select name="month" id="month">
            {% for i in range(1, 13) %}
                <option value="{{ i }}" {% if i == month %}selected{% endif %}>{{ i }}</option>
            {% endfor %}
        </select>
        <button type="submit">Filter</button>
    </form>

    <h2>Total Cost: {{ cost_details.total_cost }} USD</h2>

    <h3>Task Breakdown:</h3>
    <ul>
        {% for task in cost_details.tasks %}
            <li>
                <strong>{{ task.category }} - {{ task.task_name }}:</strong>
                {{ task.message_count }} messages, {{ task.total_cost }} USD
            </li>
        {% endfor %}
    </ul>

    <h3>Drill Down by User:</h3>
    <ul>
        {% for task in cost_details.tasks %}
            <li>
                <a href="{{ url_for('user_cost', client_id=cost_details.client.id, user_email='user@example.com') }}">View Cost for User</a>
            </li>
        {% endfor %}
    </ul>

    <a href="{{ url_for('index') }}">Back to Client List</a>
</body>
</html>
